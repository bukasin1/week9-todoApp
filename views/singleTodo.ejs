<%- include('includes/header') -%>
<body>
    
    <div class="main">

        <div class="container">
            <div class="row">
                <div class="col-md-8">
                    <% let date = todo.date.getDate() + "/" + (todo.date.getMonth() + 1) + "/" + todo.date.getFullYear() %>
                    <h5 class="mt-3"><%= date %></h5>
                    <div class="feature-box">
                        <form id="form" method="POST">
                            <div class="mb-3">
                                <label for="title" class="label">Title :</label>
                                <input id="title" type="text" name="title" value="<%= todo.title %>" class="form-control" readonly />
                            </div>
                            <div class="mb-3">
                                <label for="Details" class="label">Details :</label>
                                <textarea id="details" class="form-control" name="details" readonly><%= todo.details %></textarea>
                            </div>
                            <div class="text-center">
                                <% if(!todo.completed) { %>
                                    <input id="edit" type="submit" class="blue-btn mr-3" value="edit" />
                                    <a href="#" class="purple-btn" data-toggle="modal" data-target="#completeModal">Complete</a>
                                <% } else { %>
                                    <span class="font-bold"> Task Completed!</span>
                                <% } %>
                            </div>
                            
                            <div class="modal fade" id="completeModal" tabindex="-1" role="dialog" aria-labelledby="completeLabel" aria-hidden="true">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="completeLabel">Are you sure?</h5> 
                                            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">×</span> 
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <p>Clicking on yes means you have completed this task.</p>
                        
                                            <% let completeUrl = "/todos/" + todo._id + "/complete" %>
                                            <a href="<%= completeUrl %>" class="blue-btn mr-1">Yes</a>
                                            <a href="#" class="orange-btn" data-dismiss="modal" aria-label="Close">No</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="mt-4">
                        <a class="purple-btn float-left" href="/todos">
                            Todo List
                            <i class="fa fa-arrow-left ml-1"></i>
                        </a>
                        <a class="orange-btn float-right" href="/todolist" data-toggle="modal" data-target="#deleteModal">
                            <i class="fa fa-trash"></i>
                        </a>
                    </div>
                    <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="completeLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="completeLabel">Are you sure?</h5> 
                                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">×</span> 
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <p>Clicking on yes will delete this todoList.</p>
                
                                    <% let deleteUrl = "/todos/" + todo._id + "/delete" %>
                                    <a href="<%= deleteUrl %>" class="blue-btn mr-1">Yes</a>
                                    <a href="#" class="orange-btn" data-dismiss="modal" aria-label="Close">No</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        
    </div>
<script src="/javascripts/editTodo.js"></script>
<%- include('includes/footer') -%>
</body>
</html>